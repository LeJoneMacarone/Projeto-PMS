<!DOCTYPE html>
<html lang="en">
<%- include("./partials/head.ejs", {title: "Creator - Their Campaigns"});  %>
<body>
    <%- include("./partials/nav_bar.ejs") %>
    <div id="container">
        <%- include("./partials/creator_opt_bar.ejs") %>
        <table>
            <tr>
                <th>Title</th>
                <th>Goal</th>
                <th>Money Donated (%)</th>
                <th>Actions</th>
            </tr>

            <% campaigns.forEach((campaign) => { %>
                <tr>
                    <td><a href=""><%= campaign.title %></a></td>
                    <td><%= campaign.goal %> â‚¬</td>
                    <!--Campaign percentage of money donated-->
                    <td><%= campaign.donations_percentage %> %</td>
                    <td>
                        <form action="">
                            <button type="submit">Remove</button>
                        </form>
                        <button id="btnUpdate">Update</button>
                    </td>
                </tr>
            <% }); %>
        </table>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script>
        let container = document.getElementById("container");
        let btn_update = document.getElementById("btnUpdate");
        let showUpdateForm = false;

        btn_update.addEventListener("click", () => {
            if(!showUpdateForm){
                container.insertAdjacentHTML("afterend", 
                    `
                    <div id="updateFormPopUp">
                        <h2>Update Campaign</h2>
                        <h3>For campaign: <span>Donate for kittens</span></h3>

                        <p>Fill in the following fields to update donors and your campaign page about its progress</p>
                        <p>* mandatory field</p>
                        <form action="">
                            <label>
                                <span>Publication: <b>*</b></span>
                                <textarea placeholder="Write here your publication" required></textarea>
                            </label>
                    
                            <input type="file" name="" accept="video/* image/png image/jpeg">
                    
                            <div>
                                <button type="submit">Publish</button>
                                <button type="button">Cancel</button>
                            </div>
                        </form>
                    </div>
                    `
                );
                showUpdateForm = ~showUpdateForm;
            }
            else{
                let update_form = document.getElementById("updateFormPopUp");
                if(update_form){
                    update_form.remove();
                    showUpdateForm = ~showUpdateForm;
                }
            }
        });
    </script>
</body>
</html>