<!DOCTYPE html>
<html lang="en">
<%- include("./partials/head.ejs", {title: "Home"});  %>
<body>
    <%- include("./partials/nav_bar.ejs") %>
    <div class="container-md">
        <h1>Campaigns</h1>
        <!-- Container where is gonna go the campaign preview FOR EACH CAMPAIGN -->
        <div class="row">
            <% campaigns.forEach((campaign) => { %>
                <a href="/campaigns/<%= campaign.id %>" class="col-md-6 col-lg-4 campaign-box">
                    <div>
                        <div>
                            <h3><%= campaign.title %></h3>
                            <div class="campaign-creator">
								<img src=<%= campaign.creator.picture
                                        ? `data:image/gif;base64,${ Buffer.from(campaign.creator.picture).toString("base64") }` 
                                        : "/images/profile.png"%>
									 alt="creator_profile" >
                                <span><%= campaign.creator.username %></span>
                            </div>
                        </div>
                        <div class="campaign-info">
                            <p><b>Goal: </b><%= campaign.goal %> â‚¬</p>
                            
                            <div>
                                <div class="campaign-description">
                                    <%= campaign.description %>
                                </div>
								<!-- TODO: add picture from campaign -->
                                <!-- <div>
                                    <img src="https://images.theconversation.com/files/417128/original/file-20210820-27-j1ro6y.jpg?ixlib=rb-4.1.0&rect=0%2C11%2C3994%2C2640&q=45&auto=format&w=926&fit=clip" alt="campaign-thumbnail">
                                </div> -->
                            </div>
                        </div>
                        <div class="campaign-percentage" style="background: linear-gradient(to right, green <%= campaign.donationsPercentage %>%, white <%= campaign.donationsPercentage %>%);"></div>
                    </div>
                </a>
            <% }); %>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>
